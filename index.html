<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Music in the Second Empire Theatre</title>

    <script src="js/vue.js"></script>
    <script src="js/vue-router.js"></script>
    <script src="js/vue-resource-1.5.1.js"></script>

    <link href="css/bootstrap-4.0.0/bootstrap.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="./js/html5shiv.min.js"></script>
    <script src="./js/respond.min.js"></script>
    <![endif]-->

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="./js/jquery.min.js"></script>

    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="./js/bootstrap-4.0.0/bootstrap.min.js"></script>
    <link rel="stylesheet" src="./css/site.css"/>

    <style>
        body {
            background-color: #E5E5E5;
            font-family: Arial, Helvetica, sans-serif;
        }

        #app {
            border: 1px solid black;
            max-width: 900px;
            margin-top: 40px;
            margin-bottom: 15px;
        }

        #navigation {
            background-color: #666;
        }

        #navigation .col {
            list-style: none;
            text-align: center;
            color: white;
        }

        #navigation .col:hover {
            background-color: #E1E1E1;
        }

        #navigation .col:hover a {
            color: #333;
        }

        #navigation .col a {
            font-size: 0.8em;
            font-weight: bold;
            color: white;
            text-decoration: none;
        }

        #header {
            border-top: 1px solid black;
            border-bottom: 1px solid black;
        }

        #header img {
            width: 100%;
            height: 100%;
        }

        #content {
            background-color: white;
            padding: 10px;
        }

        #footer {
            margin: 2em 0;

        }

        h1, h2, h3, h4, h5, h6 {
            color: #900;
        }

        h1 {
            font-size: 1.2em;
            font-weight: bold;
        }

        h2 {
            font-size: 1.1em;
            font-weight: bold;
        }

    </style>

</head>
<body>
<div id="app" class="container">
    <div class="row" id="navigation">
        <div class="col col1"><a href="/" class="navlinks">FMC Home</a></div>
        <div class="col col2"><a href="/project-description" class="navlinks"> Project Description</a></div>
        <div class="col col3"><a href="/collections" class="navlinks">Collections</a></div>
        <div class="col col4"><a href="http://search.fmc.ac.uk/" class="navlinks">Search Collections</a></div>
        <div class="col col5"><a
                href="http://search.fmc.ac.uk/#m-columnbrowser@||m-informationcontrol@url=html/help.php"
                class="navlinks m-href">Help</a></div>
    </div>
    <div class="row" id="header">
        <img src="./assets/new-fmc-logo.jpg" alt="Header image"/>
    </div>
    <div id="content" class="row">
        <div>
            <h1>Music in the Second Empire Theatre</h1>
            <div id="results">
                <div v-if="sourceData.status == 'ERROR'">
                    <h2>Unable to load data</h2>
                    <p>An error has occurred. The error was: {{ sourceData.error_message }}.</p>
                </div>
                <div v-if="sourceData.status == 'LOADING'">
                    Please wait while the data loads.
                </div>
                <div v-if="sourceData.status == 'OK'">
                    <p>
                        <router-link to="/">Dataset home</router-link>
                        <router-link to="/data">Dataset schema and download</router-link>
                    </p>

                    <router-view>

                    </router-view>


                </div>


            </div>
        </div>
    </div>


    <div class="row" id="footer">
        <div class="col-sm-6"><img src="./assets/soton.png" alt="University of Southampton logo"/></div>
        <div class="col-sm-6"><img src="./assets/cam.png" alt="University of Cambridge logo"/></div>
    </div>
</div>
</div>

<script type="text/x-template" id="templateHome">
<div>
    Home template....

    <!--<div v-for="record in getResults()">-->
    <!--{{ record.title }}-->
    <!--</div>-->
</div>

</script>

<script type="text/x-template" id="templateData">
    <div>
    <h2>About the data</h2>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut pellentesque eget libero vel dignissim. Nam tristique ipsum quis neque elementum, eu suscipit leo feugiat. Fusce viverra vel tellus id maximus. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Fusce id est sed erat hendrerit venenatis. Donec auctor ut felis eget tincidunt. Nam purus felis, congue id diam eu, ultricies eleifend felis.</p>
    <table class="table">
        <thead>
        <tr>
            <th scope="col">Field id</th>
            <th scope="col">Field name</th>
            <th scope="col">Field type</th>
            <th scope="col">Description</th>
        </tr>
        </thead>
        <tbody>
            <tr v-for="field in getConfigFields()">
                <td>{{ field.id }}</td>
                <td>{{ field.label }}</td>
                <td>{{ field.type }} <span v-if="field.multiple"> list</span></td>
                <td>{{ field.description }}</td>
            </tr>
        </tbody>
    </table>
    </div>
</script>


<script>

    var Home = { template: "#templateHome", };
    var Data = {
        template: "#templateData",
        methods: {getConfigFields() {
            console.log(this);

            if (this.$parent.sourceData.status == "OK") {
                return this.$parent.sourceData.datasets[0].config.fields;
            }

            return [];

        }
    }};



    var app = new Vue({
        el: '#app',
        data: {
            sourceData: {
                status: "LOADING"
            },

        },
        created: function () {
            // GET /someUrl
            this.$http.get('/example-data.json').then(response => {
                // get body data
                this.sourceData = response.body;
            }, response => {
                // error callback
                this.sourceData.status = "ERROR"
                this.sourceData.error_message = "Error loading data over network";
            })
        },

        methods: {
            getResults() {

                if (this.sourceData.status == "OK") {
                    return this.sourceData.datasets[0].records;
                }

                return [];
            }
        },

        router: new VueRouter({ routes: [
                { path: '/', component: Home},
                { path: '/data', component: Data},
            ]})

    })
</script>
</body>
</html>
